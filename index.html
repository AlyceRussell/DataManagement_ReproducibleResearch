<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Data Management and Reproducible Research</title>
    <meta charset="utf-8" />
    <meta name="author" content="  Alyce Russell   Postdoctoral Research Fellow   a.russell@ecu.edu.au" />
    <meta name="date" content="2020-05-21" />
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link href="libs/remark-css/rladies.css" rel="stylesheet" />
    <link href="libs/remark-css/rladies-fonts.css" rel="stylesheet" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Data Management and Reproducible Research
## <br>Presented for Professor Wei Wangâ€™s Research Group @ ECU
### <br> Alyce Russell <br> Postdoctoral Research Fellow <br> <a href="mailto:a.russell@ecu.edu.au" class="email">a.russell@ecu.edu.au</a>
### School of Medical and Health Sciences, ECU
### 21 May 2020

---





# Overview

In today's talk, I will introduce data management and reproducible research. 

&lt;br&gt;
Given I'm an 
&lt;img src="./images/RLadiesLogo.png" width="10%" /&gt;
Perth cofounder, there will be bias towards R. However, the concepts presented are applicable to any programming/statistical software used in your research. 

&lt;br&gt;
Today I will address the following questions:

--

- What is data management?

--

- What is reproducible research?

--

- How can you make your research more reproducible?

--

- What is RMarkdown and why should you learn how to use it?

---

class: inverse, center, middle

# What is data management?

&lt;img src="./images/ShitData.jpeg" width="70%" style="display: block; margin: auto;" /&gt;


---

## What is data management?

Data management is a set of principles and practices that ensure high quality through the complete lifecycle of your data. 

Effective data management means better, leaner, cleaner data leading to better analytics and in our case, reproducible research.

&lt;img src="./images/research_data_lifecycle.jpg" width="60%" style="display: block; margin: auto;" /&gt;


---

class: inverse, center, middle

# What is reproducible research?

&lt;img src="https://bluesyemre.files.wordpress.com/2013/02/381743_10151184159063429_372225777_n.jpg?w=600" width="75%" style="display: block; margin: auto;" /&gt;


---

## Introduction

In the current scientific climate, a sound knowledge of computational tools is becoming increasingly important. These tools are used to manage and analyse data, as well as present research findings. 

However, the presentation of results is not limited to generating tables and figures that are exported and inserted into a document. You can generate reports which contain all your data cleaning/processing notes, code used at each step, and your research outputs using the R Programming Language. These reports can be made as Word, PDF or HTML formats, to name a few. 

&lt;img src="http://phdcomics.com/comics/archive/phd031214s.gif" width="75%" style="display: block; margin: auto;" /&gt;


---

## What is reproducible research?

&lt;br/&gt;

### Reproducibility is not the same thing as replication!! 

&lt;br/&gt;

**Replication:** same conclusions drawn in a new study.

&lt;br/&gt;

**Reproducibility:** same results from same data and code.

--

&lt;br/&gt;

&gt;Although replication is the gold standard, it isn't always feasible (i.e. if the study is too big, too costly, too time consuming, rare samples, or once off event). Thus, reproducibility may be used as a minimum standard of validity. 

---

## What is reproducible research?


Reproducible research can be considered a minimum standard in the sciences. It becomes particularly important when juggling multiple studies. 

The logic here is two-fold:

--

&lt;br/&gt;

* **Provide evidence of the correctness of your results.**

&gt; Adopting a reproducible workflow means providing our audience with the code and data that demonstrates the decisions we made as we generated our results. This makes it easier for others to satisfy themselves that our results are reliable (or not, since reproducibility is no guarantee of correctness).

--

&lt;br/&gt;

* **Enable other researchers to use our models and results.**

&gt; Equipped with only our published article, our colleagues might struggle to reconstruct our method in enough detail to apply it to their own data. Adopting a reproducible workflow means publishing our code and data in order to allow our colleagues to extend our approach to new applications with a minimum of effort. This has the potential to save a great deal of time in transmitting knowledge to future researchers.


---

## Why is reproducible research important?

Although these may be obvious, the following support why reproducible research concepts should always be implemented.

--

* It is, and has always been, an essential part of science; not doing so is simply bad science.

--

&lt;br/&gt;

* It is an important step in the Scientific Method allowing science to progress by building on previous work; without it progress slows.

--

&lt;br/&gt;

* It requires the submission of the data and computational tools used to generate the results; without it results cannot be verified and built upon.

--

&lt;br/&gt;

* It is necessary to prevent scientific misconduct; the increasing number of cases is causing a crisis of confidence in science.

---

## The 5 levels of computational reproducibility 

**Reviewable Research -** the descriptions of the research methods can be independently assessed and the results judged credible, including through both traditional peer review and community review. Importantly, it does not necessarily imply reproducibility.

--

**Replicable Research -** tools are made available that would allow a researcher to duplicate the results, for example by running the code to produce the plots shown in the publication. Here tools might be limited in scope.

--

**Confirmable Research -** the main conclusions of the research can be attained independently without the use of software provided by the author. Therefore, the results are confirmed by following the authors' instructions. 

--

**Auditable Research -** sufficient records (including data and software) have been archived so that the research can be defended later if necessary or differences between independent confirmations resolved. The archive might be private, as with traditional laboratory notebooks. 

&gt; This is the case at ECU.

--

**Open or Reproducible Research -** auditable research made openly available. This comprised well-documented and fully open code and data that are publicly available that would allow one to (a) fully audit the computational procedure, (b) replicate and also independently reproduce the results of the research, and (c) extend the results or apply the method to new problems. This is limited in the health/medical sciences due to ethical considerations. 

---

## Also, documentation doesn't begin with data analysis, silly... 

Importantly, documentation should not only be kept for analyses performed and figures generated, but it is vital to have a complete record of all data cleaning/processing steps and exploratory analyses too (the latter where you may make decisions on what models to fit). 

&lt;img src="./images/What-data-scientists-spend-the-most-time-doing.jpg" width="50%" style="display: block; margin: auto;" /&gt;

---

class: inverse, center, middle

# How can you make your research more reproducible?


&lt;img src="https://i.pinimg.com/originals/4f/60/ac/4f60ac52a58e10e5ad8b421e0e174ceb.png" width="70%" style="display: block; margin: auto;" /&gt;

---

## First things first...

&lt;img src="./images/DataCleaning.jpg" width="70%" style="display: block; margin: auto;" /&gt;

---

## Have a good filing system in place

You should have set 'working environments' for your analyses. At a minimum, I would include a data processing folder, cleaned data folder, folder containing any articles/scripts used as reference for your analyses, and your analyses folder with the necessary subfolders for different studies (for example).

&lt;br/&gt;

&lt;img src="./images/folders.png" width="40%" style="display: block; margin: auto;" /&gt;

---

## The folder commandments

**Use folders and subfolders -** group files within folders so information on a particular topic is located in one place

--

**Adhere to existing procedures -** check for established approaches in your team or department which you can adopt

--

**Name folders appropriately -** name folders after the areas of work to which they relate and not after individual researchers or students. This avoids confusion in shared workspaces if a member of staff leaves, and makes the file system easier to navigate for new people joining the workspace

--

**Be consistent -** when developing a naming scheme for your folders it is important that once you have decided on a method, you stick to it. If you can, try to agree on a naming scheme from the outset of your research project

--

**Structure folders hierarchically -** start with a limited number of folders for the broader topics, and then create more specific folders within these

--

**Separate data processing and final data -** it is a good idea to have a separate folder with all your final and cleaned datasets, separate from your working folders

--

**Backup -** ensure that your files, whether they are on your local drive, or on a network drive, are backed up

--

**Review records -** assess materials regularly or at the end of a project to ensure files are not kept needlessly. 

---

## Let's talk about data structure, baby!

Data structure refers to the way data is organised, manipulated and stored. It seeks to find ways to make data access more efficient. 

&lt;br/&gt;

When dealing with data structure, we not only focus on one piece of data, but rather different sets of data and how they can relate to one another in an organised manner. Good data structure is the foundation of all analyses. 

&lt;br/&gt;

&lt;img src="./images/DataStructureInfographic.png" width="50%" style="display: block; margin: auto;" /&gt;

---

## Data structure

From experience, I have seen that early involvement in data collection is crucial to reducing data cleaning/processing time at the completion of a collection, as well as ensuring you collect the right data.

&lt;img src="./images/What-data-scientists-hate-doing-the-most.jpg" width="80%" style="display: block; margin: auto;" /&gt;

--

### Efficient data cleaning = less time wasted fixing small issues = one big smile on your dial! :) 

---

## Things to consider when preparing data

There are many things to consider when you are preparing your dataset for not only analysis but storage, since (in theory) it should be easy for someone to pick up where you left off. 

* Is it in the right format (i.e. did you convert numbers stored as text strings into numeric values, format dates, etc)? 

* Is it consistent and comparable?

* Are there spelling mistakes in the variables or the values?

* Do you have missing data? Have you considered imputation?

* Are you certain the data you are cleaning was collected correctly?

* Were your actions to clean the data justified or have you maybe gone too far (**beware!!**)?

* Is what you did in the data cleaning steps repeatable? 

* Did you get rid of redundant blank spaces?

* Did you remove duplicates?

* Have you changed text to lower/upper/proper case consistently?

* Etc... 

---

## Store the data in a suitable and efficient format

Once collected, you should store your data in a suitable, stable and efficient format. 

&lt;br/&gt;

Spreadsheets are good for data entry. Therefore, we generally store a lot of data in spreadsheets. Popular options include `.csv` or `.txt` formats, since they are easily readable into many different programming/statistical packages.

&lt;br/&gt;

&gt; Well that's cool, but `.csv` and `.txt` formats don't allow for value coding like `.sav`, `.dta` or other similar formats... 

&lt;br/&gt;

**No worries!** You can get around this by either having separate sheets/files for the value coding (if complex) or simply adding this to your code while you're loading the data into your 'working environment'. 

---

## Suitable documentation

At a very minimum, you should have at least detailed written notes that allow for the complete reproduction of your work.

&lt;br/&gt;

Optimally, you will have an automated script that runs your analyses from start to finish. 

&lt;br/&gt;

#### RMarkdown and knitr, packages within the R Programming Language, give you the flexibility of storing all your data cleaning, labelling, exploratory analyses and final analyses/outputs in the same document, with executable code. 

---

## Keeping a record of your 'working environment'

Although using a version control protocol is preferred (i.e. you can set up GitHub to link with RStudio in a current R Project... not for today)...

&lt;img src="http://phdcomics.com/comics/archive/phd101212s.gif" width="30%" style="display: block; margin: auto;" /&gt;

---

## Keeping a record of your 'working environment'

At a minimum, you can record the `sessionInfo()`, which takes a snapshot of all the packages and package versions within the current working environment. Cool, huh?


```r
sessionInfo()
```

```
## R version 3.6.3 (2020-02-29)
## Platform: x86_64-w64-mingw32/x64 (64-bit)
## Running under: Windows 10 x64 (build 18362)
## 
## Matrix products: default
## 
## locale:
## [1] LC_COLLATE=English_Australia.1252  LC_CTYPE=English_Australia.1252   
## [3] LC_MONETARY=English_Australia.1252 LC_NUMERIC=C                      
## [5] LC_TIME=English_Australia.1252    
## 
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods   base     
## 
## loaded via a namespace (and not attached):
##  [1] compiler_3.6.3  magrittr_1.5    tools_3.6.3     htmltools_0.4.0
##  [5] xaringan_0.16   yaml_2.2.1      Rcpp_1.0.4.6    stringi_1.4.6  
##  [9] rmarkdown_2.1   knitr_1.28      stringr_1.4.0   xfun_0.13      
## [13] digest_0.6.25   rlang_0.4.6     evaluate_0.14
```

---

class: inverse, center, middle

# What is RMarkdown and why should you learn how to use it?

&lt;img src="./images/rmarkdown.png" width="25%" style="display: block; margin: auto;" /&gt;

---

## What is this wizardry?!

A suite of packages in R, known as the `tidyverse`, contains particular functions for reading, processing, manipulating, calculating, plotting, and reporting your analyses. You can even 'pipe' between the individual `tidyverse` packages so they flow between functions (neat, right?!).

&lt;br/&gt;

&lt;img src="./images/tidyverse.png" width="80%" style="display: block; margin: auto;" /&gt;

---

## What is this wizardry?!

The rest of this presentation assumes some knowledge in R. If you are a beginner, however, there will be clickable links to useful resources along the way. 

&lt;br/&gt;

Check out [https://tidyverse.org] for access to the **R for Data Science** eBook (an excellent first reference) as well as working through RStudio workshops, including [https://rmarkdown.rstudio.com] and [https://bookdown.org/yihui/bookdown/] for more on RMarkdown functions.

&lt;br/&gt;

Before you begin, make sure you have R and RStudio downloaded on your computer. These are easily searchable through the 
&lt;img src="https://www.google.com/logos/doodles/2015/googles-new-logo-5078286822539264.3-hp2x.gif" width="10%" /&gt;
search engine. Download the latest version for your computers capacity. 

---

## What is RMarkdown?

R Markdown documents are **fully reproducible**. You code into the `RMarkdown` document using RStudio, then use `knitr` to weave the narrative text, code chunks and outputs together to produce elegantly formatted reports (in Word, PDF, HTML, and it even has formats to produce these slides!!!).

&lt;img src="http://applied-r.com/wp-content/uploads/2019/01/rmarkdown_workflow.png" width="30%" style="display: block; margin: auto;" /&gt;

---

## Why not use normal scripting??

Simple answer is, you can. However, writing in the console or a basic script can be error prone. 

&lt;br/&gt;

RMarkdown files are fully executable so you can be sure there are no mistakes once the file is weaved together (it even sends error messages to let you know where issues are within the document). 

&lt;br/&gt;

&lt;img src="./images/RMarkdownFlow.png" width="80%" style="display: block; margin: auto;" /&gt;

---

## It is almost practise time, but here's a quick run down first


```r
install.packages("tidyverse") # run this line once per computer
library(tidyverse) # run this line everytime you want to use any of the tidyverse packages


#NOTE: text can be left in code chunks by using a hash symbol from the point of code you want "blanked out""
```

&lt;br/&gt;

### Two options are available for inputting code

* Code chunks (as shown above)

* Inline code

---

## Code chunks have many options

* `include = FALSE` - code runs and results be used by other chunks, but doesn't appear in finished file

* `echo = FALSE` - prevents code, but not the results from appearing in the finished file (useful way to embed figures)

* `eval = FALSE` - prevents code chuck from being evaluated (useful way to show but not run code)

* `message = FALSE` - messages do not appear in the finished file

* `warning = FALSE` - warnings do not appear in the finished file

* `fig.cap = "..."` - adds a caption to graphical results

&lt;br/&gt;

See this [**RMarkdown Cheatsheet**](https://rstudio.com/wp-content/uploads/2015/03/rmarkdown-reference.pdf) for further options. 

See the [**Definitive RMarkdown Guide**](https://bookdown.org/yihui/rmarkdown/) for more options.

---

## Inline Code

Code results can be inserted directly into the text of a .Rmd file by enclosing the code with 

```r
`r` #you get these side flicks just under the ESC button
```

---

## Correct "SOP" for starting an RMarkdown document

* Set up your folder directory in a sensible location and include relevant subdirectories (i.e. common subdirectories are `data`, `images`, `results`, etc...)

--

* Open RStudio

--

* Click on `File` -&gt; `New Project` -&gt; `Existing Directory` and find your newly created RMarkdown directory

--

* Open a new RMarkdown document, via `File` -&gt; `New File` -&gt; `RMarkdown`. Name it however you like and select `HTML` for now. 

![](images/NameCreateRMarkdown.jpg)

---

## Adding images

Add images to text chuck using:

`![](image/my_image.png)`

A caption can go within the [ ]. It is best to store these images within a separate `image` subdirectory in the .Rmd file directory (i.e. where you set up the RProject).

You can also use this format in a code chunk:

```r
knitr::include_graphics('./images/RLadiesLogo.png')
```

&lt;img src="./images/RLadiesLogo.png" width="50%" style="display: block; margin: auto;" /&gt;

--
**FUN FACT: you can insert hyperlinks into your document using `[](webaddress.com)`. **

---

## You can create simple tables

All that is required is inputting the below into the normal code, not the code chunks themselves. 


```r
Table Header | Second Header
------------- | -------------
Table Cell | Cell 2
Cell 3 | Cell 4 
```

Table Header | Second Header
------------- | -------------
Table Cell | Cell 2
Cell 3 | Cell 4 

&lt;br/&gt;

&gt; Other options for tables are available but check online for full options

---

## Debugging tip before we begin

* **Line number in error message -** note that this will refer to the beginning of the code chunk, hence shorter code chunks make debugging easier, as well as make them clearly visible in your document. 

&lt;br/&gt;

&lt;img src="https://cdn2.iconfinder.com/data/icons/color-svg-vector-icons-2/512/error_warning_alert_attention-512.png" width="30%" style="display: block; margin: auto;" /&gt;


---

## References

**Below are some reference materials you may use to further your learning journey. **

&lt;br/&gt;

* A workshop I gave earlier in the year summarising a lot of the learning resources in R: [https://youtu.be/GWbgDYRaPr8]

* A website deployment introducing reproducible research: [http://ropensci.github.io/reproducibility-guide/]

* Another workshop, this time extending into version control: [http://kbroman.org/steps2rr/]

* A summary of the different output types you can generate in RMarkdown: [https://mdozmorov.github.io/BIOS567.2017/presentations/01a_Markdown/01e_Presentation.pdf]

* Another workshop on reproducible research, with links to examples of the different outputs available: [http://applied-r.com/project-reporting-template/]

* Remember, many R-users deploy their code online, which makes learning new code easier (i.e. you can look at the final product and code tandemly to figure out the options needed for your document). [**R-Ladies Global**](https://rladies.org) GitHub repository can be found here, and you can download other respositories as a reference during your learning journey: [https://github.com/rladies]

---

## Let's do this!!

1. Create a file directory for your RMarkdown project.

2. Open RStudio, create new project (asign to existing directory just created), create new RMarkdown `HTML` file. 

3. Clone [**my GitHub repository**](https://github.com/AlyceRussell/ReproducibleResearchOct2019). Save the `data` subdirectory, to your new data directory. 

4. Edit your RMarkdown document to include a code chunk to load dependencies (i.e. packages tidyverse and readxl).

5. Next read in data from the data subdirectory using [**readxl**](https://readxl.tidyverse.org/), but include `sheet 1` as the main data, and then have `sheet 2` and `sheet 3` loaded in separately. The latter 2 contain value labels. 

6. Explore your dataset using the `str(x)`, `head(x)`, `names(x)` commands (or similar... note: replace `x` with whatever you called your main dataset).

7. Label the column `plot_id` using the values loaded in from `sheet 2`. Some transformations may be required. 

8. Label the column `species_id` within your main dataset using the values loaded in from `sheet 3`. NOTE: you need to merge the info first for `genus` and `species` then label. Append the `sheet 3` column called `taxa` as its own new column.

9. Have a look at [**dplyr**](https://dplyr.tidyverse.org/) to see if you can perform any basic manipulations. Maybe counts of species by plot id, or weight by species, etc.

10. Have a look at [**ggplot2**](https://ggplot2.tidyverse.org/) and explore plotting. Also, you can check out my previous workshop here: [http://rpubs.com/r-ladiesperth/datavisualisationbasics]

---

class: center, middle, inverse

# Thanks!

Alyce Russell

Email: a.russell@ecu.edu.au

Twitter: [**@nerdrusty**](https://www.twitter.com/nerdrusty)

&lt;br/&gt;

R-Ladies Perth: Follow us on our [**Meetup Page**](https://www.meetup.com/rladies-perth/) or [**Twitter @RLadiesPerth**](https://www.twitter.com/RLadiesPerth)

&lt;br/&gt;

These slides were created via the R packages [**xaringan**](https://github.com/yihui/xaringan), [**knitr**](http://yihui.name/knitr), and [**R Markdown**](https://rmarkdown.rstudio.com), as well as learning from the array of uploads on the [**RLadies Global GitHub Repository**](https://github.com/rladies). Practise data modified from [**Data Carpentries**](https://datacarpentry.org/lessons/#ecology-workshop).
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"ratio": "16:9",
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
